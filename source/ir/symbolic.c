#include "kefir/ir/symbolic.h"
#include "kefir/core/basic-types.h"

static struct {
    kefir_iropcode_t opcode;
    const char *symbol;
} OPCODE_SYMBOLS[] = {
    { KEFIR_IROPCODE_NOP,          KEFIR_IROPCODE_SYMBOL_NOP },
    { KEFIR_IROPCODE_JMP,          KEFIR_IROPCODE_SYMBOL_JMP },
    { KEFIR_IROPCODE_RET,          KEFIR_IROPCODE_SYMBOL_RET },
    { KEFIR_IROPCODE_INVOKE,       KEFIR_IROPCODE_SYMBOL_INVOKE },
    { KEFIR_IROPCODE_INVOKEV,      KEFIR_IROPCODE_SYMBOL_INVOKEV },
    { KEFIR_IROPCODE_BRANCH,       KEFIR_IROPCODE_SYMBOL_BRANCH },
    { KEFIR_IROPCODE_PUSHI64,      KEFIR_IROPCODE_SYMBOL_PUSHI64 },
    { KEFIR_IROPCODE_PUSHU64,      KEFIR_IROPCODE_SYMBOL_PUSHU64 },
    { KEFIR_IROPCODE_POP,          KEFIR_IROPCODE_SYMBOL_POP },
    { KEFIR_IROPCODE_PICK,         KEFIR_IROPCODE_SYMBOL_PICK },
    { KEFIR_IROPCODE_PUT,          KEFIR_IROPCODE_SYMBOL_PUT },
    { KEFIR_IROPCODE_INSERT,       KEFIR_IROPCODE_SYMBOL_INSERT },
    { KEFIR_IROPCODE_XCHG,         KEFIR_IROPCODE_SYMBOL_XCHG },
    { KEFIR_IROPCODE_DROP,         KEFIR_IROPCODE_SYMBOL_DROP },
    { KEFIR_IROPCODE_IADD,         KEFIR_IROPCODE_SYMBOL_IADD },
    { KEFIR_IROPCODE_IADD1,        KEFIR_IROPCODE_SYMBOL_IADD1 },
    { KEFIR_IROPCODE_ISUB,         KEFIR_IROPCODE_SYMBOL_ISUB },
    { KEFIR_IROPCODE_IMUL,         KEFIR_IROPCODE_SYMBOL_IMUL },
    { KEFIR_IROPCODE_IDIV,         KEFIR_IROPCODE_SYMBOL_IDIV },
    { KEFIR_IROPCODE_IMOD,         KEFIR_IROPCODE_SYMBOL_IMOD },
    { KEFIR_IROPCODE_INEG,         KEFIR_IROPCODE_SYMBOL_INEG },
    { KEFIR_IROPCODE_INOT,         KEFIR_IROPCODE_SYMBOL_INOT },
    { KEFIR_IROPCODE_IAND,         KEFIR_IROPCODE_SYMBOL_IAND },
    { KEFIR_IROPCODE_IOR,          KEFIR_IROPCODE_SYMBOL_IOR },
    { KEFIR_IROPCODE_IXOR,         KEFIR_IROPCODE_SYMBOL_IXOR },
    { KEFIR_IROPCODE_IRSHIFT,      KEFIR_IROPCODE_SYMBOL_IRSHIFT },
    { KEFIR_IROPCODE_IARSHIFT,     KEFIR_IROPCODE_SYMBOL_IARSHIFT },
    { KEFIR_IROPCODE_ILSHIFT,      KEFIR_IROPCODE_SYMBOL_ILSHIFT },
    { KEFIR_IROPCODE_IEQUALS,      KEFIR_IROPCODE_SYMBOL_IEQUALS },
    { KEFIR_IROPCODE_IGREATER,     KEFIR_IROPCODE_SYMBOL_IGREATER },
    { KEFIR_IROPCODE_ILESSER,      KEFIR_IROPCODE_SYMBOL_ILESSER },
    { KEFIR_IROPCODE_IABOVE,       KEFIR_IROPCODE_SYMBOL_IABOVE },
    { KEFIR_IROPCODE_IBELOW,       KEFIR_IROPCODE_SYMBOL_IBELOW },
    { KEFIR_IROPCODE_BAND,         KEFIR_IROPCODE_SYMBOL_BAND },
    { KEFIR_IROPCODE_BOR,          KEFIR_IROPCODE_SYMBOL_BOR },
    { KEFIR_IROPCODE_BNOT,         KEFIR_IROPCODE_SYMBOL_BNOT },
    { KEFIR_IROPCODE_TRUNCATE1,    KEFIR_IROPCODE_SYMBOL_TRUNCATE1 },
    { KEFIR_IROPCODE_EXTEND8,      KEFIR_IROPCODE_SYMBOL_EXTEND8 },
    { KEFIR_IROPCODE_EXTEND16,     KEFIR_IROPCODE_SYMBOL_EXTEND16 },
    { KEFIR_IROPCODE_EXTEND32,     KEFIR_IROPCODE_SYMBOL_EXTEND32 },
    { KEFIR_IROPCODE_OFFSETPTR,    KEFIR_IROPCODE_SYMBOL_OFFSETPTR },
    { KEFIR_IROPCODE_ELEMENTPTR,   KEFIR_IROPCODE_SYMBOL_ELEMENTPTR },
    { KEFIR_IROPCODE_LOAD8U,       KEFIR_IROPCODE_SYMBOL_LOAD8U },
    { KEFIR_IROPCODE_LOAD8I,       KEFIR_IROPCODE_SYMBOL_LOAD8I },
    { KEFIR_IROPCODE_LOAD16U,      KEFIR_IROPCODE_SYMBOL_LOAD16U },
    { KEFIR_IROPCODE_LOAD16I,      KEFIR_IROPCODE_SYMBOL_LOAD16I },
    { KEFIR_IROPCODE_LOAD32U,      KEFIR_IROPCODE_SYMBOL_LOAD32U },
    { KEFIR_IROPCODE_LOAD32I,      KEFIR_IROPCODE_SYMBOL_LOAD32I },
    { KEFIR_IROPCODE_LOAD64,       KEFIR_IROPCODE_SYMBOL_LOAD64 },
    { KEFIR_IROPCODE_STORE8,       KEFIR_IROPCODE_SYMBOL_STORE8 },
    { KEFIR_IROPCODE_STORE16,      KEFIR_IROPCODE_SYMBOL_STORE16 },
    { KEFIR_IROPCODE_STORE32,      KEFIR_IROPCODE_SYMBOL_STORE32 },
    { KEFIR_IROPCODE_STORE64,      KEFIR_IROPCODE_SYMBOL_STORE64 },
    { KEFIR_IROPCODE_GETLOCALS,    KEFIR_IROPCODE_SYMBOL_GETLOCALS },
    { KEFIR_IROPCODE_PUSHF32,      KEFIR_IROPCODE_SYMBOL_PUSHF32 },
    { KEFIR_IROPCODE_PUSHF64,      KEFIR_IROPCODE_SYMBOL_PUSHF64 },
    { KEFIR_IROPCODE_F32ADD,       KEFIR_IROPCODE_SYMBOL_F32ADD },
    { KEFIR_IROPCODE_F32SUB,       KEFIR_IROPCODE_SYMBOL_F32SUB },
    { KEFIR_IROPCODE_F32MUL,       KEFIR_IROPCODE_SYMBOL_F32MUL },
    { KEFIR_IROPCODE_F32DIV,       KEFIR_IROPCODE_SYMBOL_F32DIV },
    { KEFIR_IROPCODE_F64ADD,       KEFIR_IROPCODE_SYMBOL_F64ADD },
    { KEFIR_IROPCODE_F64SUB,       KEFIR_IROPCODE_SYMBOL_F64SUB },
    { KEFIR_IROPCODE_F64MUL,       KEFIR_IROPCODE_SYMBOL_F64MUL },
    { KEFIR_IROPCODE_F64DIV,       KEFIR_IROPCODE_SYMBOL_F64DIV },
    { KEFIR_IROPCODE_F32EQUALS,    KEFIR_IROPCODE_SYMBOL_F32EQUALS },
    { KEFIR_IROPCODE_F32GREATER,   KEFIR_IROPCODE_SYMBOL_F32GREATER },
    { KEFIR_IROPCODE_F32LESSER,    KEFIR_IROPCODE_SYMBOL_F32LESSER },
    { KEFIR_IROPCODE_F64EQUALS,    KEFIR_IROPCODE_SYMBOL_F64EQUALS },
    { KEFIR_IROPCODE_F64GREATER,   KEFIR_IROPCODE_SYMBOL_F64GREATER },
    { KEFIR_IROPCODE_F64LESSER,    KEFIR_IROPCODE_SYMBOL_F64LESSER },
    { KEFIR_IROPCODE_F32CINT,      KEFIR_IROPCODE_SYMBOL_F32CINT },
    { KEFIR_IROPCODE_F64CINT,      KEFIR_IROPCODE_SYMBOL_F64CINT },
    { KEFIR_IROPCODE_INTCF32,      KEFIR_IROPCODE_SYMBOL_INTCF32 },
    { KEFIR_IROPCODE_INTCF64,      KEFIR_IROPCODE_SYMBOL_INTCF64 },
    { KEFIR_IROPCODE_F32CF64,      KEFIR_IROPCODE_SYMBOL_F32CF64 },
    { KEFIR_IROPCODE_F64CF32,      KEFIR_IROPCODE_SYMBOL_F64CF32 },
    { KEFIR_IROPCODE_VARARG_START, KEFIR_IROPCODE_SYMBOL_VARARG_START },
    { KEFIR_IROPCODE_VARARG_COPY,  KEFIR_IROPCODE_SYMBOL_VARARG_COPY },
    { KEFIR_IROPCODE_VARARG_GET,   KEFIR_IROPCODE_SYMBOL_VARARG_GET },
    { KEFIR_IROPCODE_VARARG_END,   KEFIR_IROPCODE_SYMBOL_VARARG_END },
    { KEFIR_IROPCODE_GETGLOBAL,    KEFIR_IROPCODE_SYMBOL_GETGLOBAL },
};

const char *kefir_iropcode_symbol(kefir_iropcode_t opcode) {
    for (kefir_size_t i = 0; i < sizeof(OPCODE_SYMBOLS) / sizeof(OPCODE_SYMBOLS[0]); i++) {
        if (OPCODE_SYMBOLS[i].opcode == opcode) {
            return OPCODE_SYMBOLS[i].symbol;
        }
    }
    return NULL;
}